{
  "name": "Bitcoin Daily Report",
  "nodes": [
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "cd6b3e6f-5b6f-4aa0-9e9b-ef6e63b3c2f5",
              "leftValue": "={{ $json.priceUSDRaw }}",
              "rightValue": 10000,
              "operator": {
                "type": "number",
                "operation": "gte"
              }
            },
            {
              "id": "b0db7c5f-4d8e-4c3f-a3d4-2f5e98c3b1f8",
              "leftValue": "={{ $json.priceUSDRaw }}",
              "rightValue": 500000,
              "operator": {
                "type": "number",
                "operation": "lte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "ba82f25f-f41d-4682-a3e0-a75af213f7f8",
      "name": "Validate Data",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1100,
        -360
      ],
      "notesInFlow": true,
      "notes": "Ensures price is within reasonable bounds"
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "#n8n-demo",
          "mode": "name"
        },
        "text": "=â‚¿ *æ¯”ç‰¹å¹£æ¯æ—¥å ±å‘Š*\n\nğŸ’° *ç¾åƒ¹ (USD):* {{ $json.priceUSD }}\nğŸ’° *ç¾åƒ¹ (TWD):* {{ $json.priceTWD }}\n\n{{ $json.changeEmoji }} *24å°æ™‚è®ŠåŒ–:* {{ $json.changePercent }} ({{ $json.changeDollar }})\nğŸ“Š *å¸‚å ´è¶¨å‹¢:* {{ $json.trend }}\n\nğŸ“ˆ *æŠ€è¡“æŒ‡æ¨™*\n{{ $json.rsiEmoji }} *RSI (14):* {{ $json.rsi }} - {{ $json.rsiStatus }}\nğŸ’¹ *24å°æ™‚äº¤æ˜“é‡:* {{ $json.volume }}\nğŸ¦ *ç¸½å¸‚å€¼:* {{ $json.marketCap }}\n\nâ° _æ›´æ–°æ™‚é–“: {{ $json.timestamp }}_\nğŸ“Š _æ•¸æ“šä¾†æº: CoinGecko_",
        "otherOptions": {
          "link_names": true,
          "unfurl_links": false,
          "unfurl_media": false
        }
      },
      "id": "a2d3d0b8-2dc7-4bdf-8170-630fe70a70b1",
      "name": "Send to Slack",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [
        1320,
        -460
      ],
      "notesInFlow": true,
      "webhookId": "eadee8db-6349-49af-90d5-deeac7554b4a",
      "credentials": {
        "slackApi": {
          "id": "TlBKLWpZUzoKXjMg",
          "name": "Slack account"
        }
      },
      "notes": "Sends formatted report to Slack channel"
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "c212036b-c476-4ad9-a4e1-8d74978377ec",
      "name": "Prepare Error Message",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1320,
        -260
      ]
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours"
            }
          ]
        }
      },
      "id": "aae72ae6-2547-4c14-97b0-283b3490f537",
      "name": "Daily Trigger 13:",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        220,
        -360
      ]
    },
    {
      "parameters": {
        "url": "=https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd,twd&include_24hr_change=true&include_24hr_vol=true&include_market_cap=true&include_last_updated_at=true",
        "options": {
          "timeout": 30000
        }
      },
      "id": "b7f07d5f-acc3-4461-ad42-0336eb67deeb",
      "name": "Get Bitcoin Price1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        440,
        -360
      ]
    },
    {
      "parameters": {
        "url": "=https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=15&interval=daily",
        "options": {
          "timeout": 30000
        }
      },
      "id": "553abc20-49b4-4b68-a442-f54f58d63651",
      "name": "Get Historical Data1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        660,
        -360
      ]
    },
    {
      "parameters": {
        "jsCode": "// ç›´æ¥å¾å‰ä¸€å€‹ç¯€é»ç²å–æ­·å²æ•¸æ“š\nconst historicalData = $json.prices;\n\n// å¾ç‰¹å®šç¯€é»ç²å–åƒ¹æ ¼æ•¸æ“š\nconst priceData = $('Get Bitcoin Price1').first().json;\nconst currentData = priceData.bitcoin;\n\n// æª¢æŸ¥æ•¸æ“š\nif (!currentData || !historicalData) {\n  throw new Error('Missing required data');\n}\n\n// Calculate RSI\nfunction calculateRSI(prices, period = 14) {\n  if (!prices || prices.length < period + 1) return 50;\n  \n  let gains = 0;\n  let losses = 0;\n  \n  for (let i = 1; i <= period; i++) {\n    const change = prices[i][1] - prices[i-1][1];\n    if (change > 0) {\n      gains += change;\n    } else {\n      losses += Math.abs(change);\n    }\n  }\n  \n  const avgGain = gains / period;\n  const avgLoss = losses / period;\n  \n  if (avgLoss === 0) return 100;\n  \n  const rs = avgGain / avgLoss;\n  const rsi = 100 - (100 / (1 + rs));\n  \n  return Math.round(rsi * 100) / 100;\n}\n\n// Calculate RSI\nconst rsi = calculateRSI(historicalData);\n\n// Determine RSI status\nlet rsiStatus = 'â¡ï¸ ä¸­æ€§';\nlet rsiEmoji = 'ğŸ˜';\nif (rsi > 70) {\n  rsiStatus = 'ğŸ”¥ è¶…è²·';\n  rsiEmoji = 'ğŸš¨';\n} else if (rsi < 30) {\n  rsiStatus = 'â„ï¸ è¶…è³£';\n  rsiEmoji = 'ğŸ’';\n} else if (rsi > 60) {\n  rsiStatus = 'ğŸ“ˆ åå¼·';\n  rsiEmoji = 'ğŸ’ª';\n} else if (rsi < 40) {\n  rsiStatus = 'ğŸ“‰ åå¼±';\n  rsiEmoji = 'ğŸ˜°';\n}\n\n// Format numbers\nconst formatNumber = (num) => {\n  return new Intl.NumberFormat('zh-TW').format(Math.round(num));\n};\n\nconst formatCurrency = (num) => {\n  return new Intl.NumberFormat('zh-TW', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  }).format(num);\n};\n\nconst formatBillion = (num) => {\n  const billion = num / 1000000000;\n  return `$${billion.toFixed(1)}B`;\n};\n\n// Get current values\nconst priceUSD = currentData.usd || 0;\nconst priceTWD = currentData.twd || 0;\nconst change24h = currentData.usd_24h_change || 0;\nconst volume24h = currentData.usd_24h_vol || 0;\nconst marketCap = currentData.usd_market_cap || 0;\n\n// Determine trend\nconst changeEmoji = change24h > 0 ? 'ğŸ“ˆ' : 'ğŸ“‰';\nconst trend = Math.abs(change24h) > 5 ? \n  (change24h > 0 ? 'ğŸ‚ å¼·å‹¢ç‰›å¸‚' : 'ğŸ» å¼±å‹¢ç†Šå¸‚') : \n  'â¡ï¸ ç›¤æ•´';\n\nconst color = change24h > 0 ? '#2EB67D' : '#E01E5A';\n\nconst timestamp = new Date().toLocaleString('zh-TW', {\n  timeZone: 'Asia/Taipei',\n  year: 'numeric',\n  month: '2-digit',\n  day: '2-digit',\n  hour: '2-digit',\n  minute: '2-digit'\n});\n\nconst changeDollar = Math.abs(priceUSD * change24h / 100);\n\nreturn [{\n  json: {\n    priceUSD: formatCurrency(priceUSD),\n    priceUSDRaw: priceUSD,\n    priceTWD: `NT$${formatNumber(priceTWD)}`,\n    changePercent: `${change24h > 0 ? '+' : ''}${change24h.toFixed(2)}%`,\n    changeDollar: formatCurrency(changeDollar),\n    changeEmoji: changeEmoji,\n    volume: formatBillion(volume24h),\n    marketCap: formatBillion(marketCap),\n    rsi: rsi,\n    rsiStatus: rsiStatus,\n    rsiEmoji: rsiEmoji,\n    trend: trend,\n    color: color,\n    timestamp: timestamp\n  }\n}];"
      },
      "id": "6970f858-c603-4bbf-b664-83ba4065a643",
      "name": "Process Data & Calculate RSI1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        880,
        -360
      ]
    },
    {
      "parameters": {
        "content": "## ğŸš€ æ¯”ç‰¹å¹£æ¯æ—¥å ±å‘Š Workflow v1.0\n\n### ğŸ“‹ åŠŸèƒ½æ¦‚è¿°\nè‡ªå‹•åŒ–æ¯”ç‰¹å¹£å¸‚å ´å ±å‘Šç³»çµ±ï¼Œæ¯æ—¥å®šæ™‚ç™¼é€å°ˆæ¥­çš„å¸‚å ´åˆ†æåˆ° Slack\n\n### âš¡ æ ¸å¿ƒåŠŸèƒ½\n- ğŸ“… **å®šæ™‚åŸ·è¡Œ**: æ¯æ—¥ 13:00 (å°åŒ—æ™‚é–“) è‡ªå‹•è§¸ç™¼\n- ğŸ’° **å³æ™‚åƒ¹æ ¼**: ç²å– BTC/USD å’Œ BTC/TWD æœ€æ–°åƒ¹æ ¼\n- ğŸ“Š **æŠ€è¡“åˆ†æ**: è¨ˆç®— 14 æœŸ RSI æŒ‡æ¨™ï¼Œåˆ¤æ–·è¶…è²·è¶…è³£\n- ğŸ“ˆ **å¸‚å ´è¶¨å‹¢**: åˆ†æ 24 å°æ™‚åƒ¹æ ¼è®ŠåŒ–ï¼Œåˆ¤æ–·ç‰›ç†Šå¸‚\n- ğŸ’¬ **Slack é€šçŸ¥**: æ ¼å¼åŒ–å ±å‘Šè‡ªå‹•ç™¼é€åˆ°æŒ‡å®šé »é“\n\n### ğŸ”„ å·¥ä½œæµç¨‹\n1. **Schedule Trigger** â†’ æ¯æ—¥ 13:00 è§¸ç™¼\n2. **Get Bitcoin Price** â†’ å¾ CoinGecko ç²å–å³æ™‚åƒ¹æ ¼\n3. **Get Historical Data** â†’ ç²å– 15 å¤©æ­·å²æ•¸æ“š\n4. **Process & Calculate RSI** â†’ è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ä¸¦æ ¼å¼åŒ–\n5. **Validate Data** â†’ é©—è­‰åƒ¹æ ¼åˆç†æ€§ ($10K-$500K)\n6. **Send to Slack** â†’ ç™¼é€æ ¼å¼åŒ–å ±å‘Š\n\n### ğŸ“Š RSI æŒ‡æ¨™è§£è®€\n- ğŸ”¥ **RSI > 70**: è¶…è²·å€ï¼Œå¯èƒ½å›èª¿\n- ğŸ’ **RSI < 30**: è¶…è³£å€ï¼Œå¯èƒ½åå½ˆ\n- ğŸ’ª **RSI 60-70**: åå¼·å‹¢\n- ğŸ˜° **RSI 30-40**: åå¼±å‹¢\n- â¡ï¸ **RSI 40-60**: ä¸­æ€§å€é–“\n\n### âš™ï¸ è¨­å®šæ³¨æ„äº‹é …\n1. **Slack é »é“**: æ›´æ–° Send to Slack ç¯€é»çš„é »é“åç¨±\n2. **æ™‚å€è¨­å®š**: Workflow å·²è¨­ç‚º Asia/Taipei\n3. **API é™åˆ¶**: CoinGecko å…è²»ç‰ˆæ¯æœˆ 10,000 æ¬¡å‘¼å«\n4. **éŒ¯èª¤è™•ç†**: åƒ¹æ ¼ç•°å¸¸æ™‚æœƒè·³åˆ°éŒ¯èª¤è¨Šæ¯åˆ†æ”¯\n\n### ğŸ› ï¸ è‡ªè¨‚é¸é …\n- ä¿®æ”¹ RSI æœŸæ•¸ï¼ˆé è¨­ 14ï¼‰\n- èª¿æ•´åƒ¹æ ¼é©—è­‰ç¯„åœ\n- åŠ å…¥æ›´å¤šæŠ€è¡“æŒ‡æ¨™\n- æ”¯æ´å¤šç¨®åŠ å¯†è²¨å¹£\n\n### ğŸ“ ç‰ˆæœ¬è³‡è¨Š\n- å»ºç«‹æ—¥æœŸ: 2025-01-05\n- ç‰ˆæœ¬: 1.0\n- ä½œè€…: Bitcoin Price Bot\n- è³‡æ–™ä¾†æº: CoinGecko API (å…è²»ç‰ˆ)",
        "height": 800,
        "width": 460,
        "color": 5
      },
      "id": "7d91246e-c13d-4b5a-94a8-66c818d11e30",
      "name": "Workflow å®Œæ•´èªªæ˜",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1680,
        -900
      ]
    },
    {
      "parameters": {
        "content": "# ğŸ’° Bitcoin Daily Report Bot\n\n**æ¯æ—¥ 13:00 è‡ªå‹•ç™¼é€æ¯”ç‰¹å¹£å¸‚å ´å ±å‘Šåˆ° Slack**\n\n## ğŸ“Š å ±å‘Šå…§å®¹\n- å³æ™‚åƒ¹æ ¼ (USD/TWD)\n- 24 å°æ™‚æ¼²è·Œå¹…\n- RSI æŠ€è¡“æŒ‡æ¨™ (14 æœŸ)\n- äº¤æ˜“é‡ & å¸‚å€¼\n- å¸‚å ´è¶¨å‹¢åˆ†æ\n\n## ğŸ”§ å¿«é€Ÿè¨­å®š\n1. æ›´æ–° Slack é »é“ ID\n2. è¨­å®š Slack èªè­‰\n3. å•Ÿç”¨ Workflow\n\n## âš¡ è³‡æ–™æµç¨‹\n```\nTrigger (13:00)\n  â†“\nGet Price â†’ Get History\n  â†“\nCalculate RSI\n  â†“\nValidate â†’ Send to Slack\n```\n\n## ğŸ¯ RSI è¨Šè™Ÿ\n- è¶…è²· > 70 ğŸ”¥\n- è¶…è³£ < 30 ğŸ’\n- ä¸­æ€§ 40-60 â¡ï¸\n\n---\nğŸ’¡ **æç¤º**: å¯åŠ å…¥æ›´å¤šå¹£ç¨®æˆ–æŒ‡æ¨™",
        "height": 500,
        "width": 320,
        "color": 3
      },
      "id": "073a1eb9-86f6-47ee-b5f2-ed1da9c805a1",
      "name": "å¿«é€ŸæŒ‡å—",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2180,
        -900
      ]
    },
    {
      "parameters": {
        "content": "## ğŸš¨ å¸¸è¦‹å•é¡Œæ’é™¤\n\n### âŒ API éŒ¯èª¤\n**å•é¡Œ**: Request failed with status code 429\n**è§£æ±º**: API é”åˆ°é€Ÿç‡é™åˆ¶ï¼Œç­‰å¾… 1 åˆ†é˜å¾Œé‡è©¦\n\n### âŒ Slack ç™¼é€å¤±æ•—\n**å•é¡Œ**: Channel not found\n**è§£æ±º**: \n1. ç¢ºèªé »é“åç¨±æ­£ç¢ºï¼ˆå« #ï¼‰\n2. ç¢ºèª Bot å·²åŠ å…¥é »é“\n3. ä½¿ç”¨ `/invite @BotName` é‚€è«‹\n\n### âŒ RSI è¨ˆç®—éŒ¯èª¤\n**å•é¡Œ**: Cannot read property 'prices'\n**è§£æ±º**: æª¢æŸ¥æ­·å²æ•¸æ“š API æ˜¯å¦æ­£å¸¸è¿”å›\n\n### âŒ æ™‚å€ä¸æ­£ç¢º\n**å•é¡Œ**: åŸ·è¡Œæ™‚é–“ä¸æ˜¯ 13:00\n**è§£æ±º**: \n1. æª¢æŸ¥ Workflow Settings\n2. ç¢ºèª timezone: \"Asia/Taipei\"\n3. é‡å•Ÿ Workflow\n\n### âŒ åƒ¹æ ¼é©—è­‰å¤±æ•—\n**å•é¡Œ**: åƒ¹æ ¼è¶…å‡ºåˆç†ç¯„åœ\n**è§£æ±º**: èª¿æ•´ Validate Data ç¯€é»çš„ç¯„åœè¨­å®š",
        "height": 480,
        "width": 380
      },
      "id": "1302518d-e588-4dce-8e04-7520e0b23881",
      "name": "å•é¡Œæ’é™¤æŒ‡å—",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1680,
        -60
      ]
    },
    {
      "parameters": {
        "content": "## ğŸ“ˆ é€²éšåŠŸèƒ½æ“´å……\n\n### ğŸ”§ æ”¯æ´å¤šå¹£ç¨®\n```javascript\n// ä¿®æ”¹ API URL\nids=bitcoin,ethereum,binancecoin\n```\n\n### ğŸ“Š åŠ å…¥ MACD æŒ‡æ¨™\n```javascript\nfunction calculateMACD(prices) {\n  // EMA 12, 26, Signal 9\n  // å¯¦ä½œ MACD è¨ˆç®—\n}\n```\n\n### â° å¤šæ¬¡é€šçŸ¥\n- 08:00 - æ—©ç›¤å ±å‘Š\n- 13:00 - åˆé–“æ›´æ–°\n- 21:00 - æ”¶ç›¤ç¸½çµ\n\n### ğŸ¯ åƒ¹æ ¼è­¦å ±\n```javascript\nif (change24h > 10) {\n  // ç™¼é€ç·Šæ€¥é€šçŸ¥\n}\n```\n\n### ğŸ“± Line/Telegram æ•´åˆ\n- ä½¿ç”¨å°æ‡‰çš„ N8N ç¯€é»\n- è¤‡è£½ Slack è¨Šæ¯æ ¼å¼\n\n### ğŸ’¾ æ•¸æ“šå„²å­˜\n- Google Sheets è¨˜éŒ„\n- è³‡æ–™åº«å­˜æª”\n- æ­·å²è¶¨å‹¢åˆ†æ",
        "height": 480,
        "width": 380,
        "color": 4
      },
      "id": "a245deb7-be5e-48f0-b855-bebe2649f3d5",
      "name": "é€²éšåŠŸèƒ½å»ºè­°",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2080,
        -60
      ]
    },
    {
      "parameters": {
        "content": "## ğŸ“Œ é‡è¦æé†’\n\n### âš ï¸ å®‰å…¨æ€§\n- ä¸è¦åœ¨ Code ç¯€é»ä¸­ç¡¬ç·¨ç¢¼ API é‡‘é‘°\n- ä½¿ç”¨ N8N çš„ Credentials åŠŸèƒ½\n- å®šæœŸæ›´æ–°èªè­‰è³‡è¨Š\n\n### ğŸ’° æˆæœ¬è€ƒé‡\n- CoinGecko å…è²»ç‰ˆ: 10,000 æ¬¡/æœˆ\n- æ¯æ—¥åŸ·è¡Œ 2 æ¬¡ = 60 æ¬¡/æœˆ\n- å……è¶³çš„é…é¡ç©ºé–“\n\n### ğŸ”„ ç¶­è­·å»ºè­°\n- æ¯æœˆæª¢æŸ¥åŸ·è¡Œç´€éŒ„\n- ç›£æ§ API ä½¿ç”¨é‡\n- å®šæœŸæ¸¬è©¦ Slack é€£ç·š\n- å‚™ä»½ Workflow è¨­å®š\n\n### ğŸ“Š æ•ˆèƒ½å„ªåŒ–\n- åˆä½µ API è«‹æ±‚\n- å¿«å–éœæ…‹æ•¸æ“š\n- é¿å…é‡è¤‡è¨ˆç®—\n\n---\nğŸ’¡ è¨˜å¾—å®šæœŸæª¢æŸ¥ Workflow åŸ·è¡Œç‹€æ³ï¼",
        "height": 420,
        "width": 340,
        "color": 6
      },
      "id": "acda74c1-eb3b-421f-ab9c-e00bf5be1c73",
      "name": "é‡è¦æé†’",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2540,
        -900
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "Validate Data": {
      "main": [
        [
          {
            "node": "Send to Slack",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Prepare Error Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Daily Trigger 13:": {
      "main": [
        [
          {
            "node": "Get Bitcoin Price1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Bitcoin Price1": {
      "main": [
        [
          {
            "node": "Get Historical Data1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Historical Data1": {
      "main": [
        [
          {
            "node": "Process Data & Calculate RSI1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Data & Calculate RSI1": {
      "main": [
        [
          {
            "node": "Validate Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "841f3e59-c569-4acf-af4b-7fe94b4db515",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "888a8c05da76b495dd9ecfb59aacefd871c48ab4e43409e77d226b344d9412b4"
  },
  "id": "JKfxhTtEbJnaLbLZ",
  "tags": [
    {
      "name": "crypto",
      "id": "SprpeXCvjlEztqHm",
      "createdAt": "2025-07-05T10:55:00.497Z",
      "updatedAt": "2025-07-05T10:55:00.497Z"
    },
    {
      "name": "scheduled",
      "id": "7mIDXVg5aVbvpEH5",
      "createdAt": "2025-07-05T10:55:03.681Z",
      "updatedAt": "2025-07-05T10:55:03.681Z"
    },
    {
      "name": "slack-notification",
      "id": "cjChk96c2e48qKOd",
      "createdAt": "2025-07-05T10:55:07.842Z",
      "updatedAt": "2025-07-05T10:55:07.842Z"
    },
    {
      "name": "automated-report",
      "id": "Vbfkr2W0YLnxG316",
      "createdAt": "2025-07-05T10:55:13.972Z",
      "updatedAt": "2025-07-05T10:55:13.972Z"
    }
  ]
}
